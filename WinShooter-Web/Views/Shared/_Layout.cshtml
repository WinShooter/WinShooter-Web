<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>WinShooter @ViewBag.CompetitionName</title>
    @Styles.Render("~/Content/bootstrap")
    @Styles.Render("~/Content/css")    
    @Scripts.Render("~/bundles/modernizr")
@if (!string.IsNullOrEmpty(ViewBag.CompetitionId))
{
    <script>
        window.competitionId = '@ViewBag.CompetitionId';
    </script>
}
</head>
    <body>
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="~/">WinShooter @ViewBag.CompetitionName</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        @if (!string.IsNullOrEmpty(ViewBag.CompetitionId))
                        {
                            <li class="active">@Html.ActionLink("Tävlingsinfo", "Competition", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Klubbar", "Clubs", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Vapen", "Weapons", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Stationer", "Stations", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Tävlande", "Competitors", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Resultatinmatning", "EnterResults", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Resultat", "Results", "Home", new { id = ViewBag.CompetitionId }, null)</li>
                            <li>@Html.ActionLink("Rättigheter", "ManageCompetitionRights", "Home", new RouteValueDictionary() { { "id", ViewBag.CompetitionId } }, new Dictionary<string, object> { { "style", "display: none" }, { "data-bind", "visible: loginViewModel.shouldShowEditRightsLink" } })</li>
                        }
                        <li>
                            @Html.ActionLink("Logga in", "Login", "Account", null, new Dictionary<string, object> { {"style", "display: none"}, { "data-bind", "visible: loginViewModel.shouldShowLoginLink" } })
                            <a style="display: none" data-bind="visible: loginViewModel.isLoggedIn" href="/api/auth/logout">Logga ut</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="winshooter-template">
                @RenderBody()
            </div>
        </div>
        
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")
        @Scripts.Render("~/bundles/bootstrap")
        @Scripts.Render("~/bundles/knockout")
        @Scripts.Render("~/Scripts/App/common.js")
        
        <!-- fallback for CDN -->
        <script>
            // Fallback to loading jQuery from a local path if the CDN is unavailable
            (window.jQuery === undefined && document.write('<script src="@Url.Content("~/Scripts/jquery-1.9.1.js")"><\/script>'));
        </script>
        <script>
            // Fallback to loading jQuery.ui from a local path if the CDN is unavailable
            (window.jQuery.ui === undefined && document.write('<script src="@Url.Content("~/Scripts/jquery-ui-1.10.3.js")"><\/script>'));
        </script>
        <script>
            // Fallback to loading knockout from a local path if the CDN is unavailable
            (window.ko === undefined && document.write('<script src="@Url.Content("~/Scripts/knockout-2.2.0.js")"><\/script>'));
        </script>

        @RenderSection("scripts", required: false)
    </body>
</html>
